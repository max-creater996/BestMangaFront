<script setup lang="ts">
import styles from "./MangaChapters.module.scss";
import { useMangaStore } from "~/entities/Manga/model/module/useMangaStore";

const mangaStore = useMangaStore();
const manga = mangaStore.manga;

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã
const formatDate = (isoDate: string) => {
  return new Date(isoDate).toLocaleDateString("ru-RU", {
    day: "2-digit",
    month: "long",
    year: "numeric",
  });
};
</script>

<template>
  <div :class="styles.chapterList">
    <h2>üìñ –ù–æ–≤—ã–µ –≥–ª–∞–≤—ã</h2>
    <div :class="styles.list">
      <div
          v-for="chapter in manga.chapters"
          :key="chapter.id"
          :class="styles.chapter"
      >
        <NuxtLink :to="`${manga.slug}/${chapter.chapter_number}`">
          <div class="chapter-info">
            <h3>–ì–ª–∞–≤–∞ {{ chapter.chapter_number }}</h3>
            <p>{{ chapter.chapter_title }}</p>
            <p>–¢–æ–º {{chapter.volume}}</p>
          </div>
          <span class="date">{{ formatDate(chapter.date_time) }}</span>
        </NuxtLink>
      </div>
    </div>
  </div>
</template>
